<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>车辆业务-西南石油大学保卫处</title>
	<link rel="stylesheet" href="../css/reset.css">
	<link rel="stylesheet" href="../libs/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="../css/index.css">
	<script src="../libs/jquery-3.3.1.min.js"></script>
	<script src="../libs/bootstrap/dist/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="main">
		<header>
			<img src="../images/logo.png">
		</header>
		<section class="contain">
			<h2>车辆业务办理</h2>
			<div class="for-form">
				<form class="form-horizontal" id="form-submit">
					<div class="form-group">
						<label class="col-sm-4 control-label">员工号：</label>
						<div class="col-sm-5">
							<input type="text" placeholder="请输入员工号" id="emp_no" name="emp_no" class="form-control" >
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-4 control-label">密&nbsp;&nbsp;&nbsp;&nbsp;码：</label>
						<div class="col-sm-5">
							<input type="text" placeholder="请输入密码" id="psw" name="psw" class="form-control">
						</div>
					</div>
					<p id="warning"></p>
					<div class="form-group">
						<div class="col-sm-offset-0 col-sm-9">
							<button type="submit" class="btn btn-default" id="btn-submit">登录</button>
						</div>
					</div>
				</form>
			</div>
		</section>
		<footer>
			<ul>
				<li>西南石油大学保卫部（处）（武装部）&nbsp;&nbsp;&nbsp;地址：四川省成都市新都区新都大道8号</li>
				<li>电话：028-83032110&nbsp;&nbsp;&nbsp;邮编：610500</li>
			</ul>
		</footer>
	</div>

	<!-- <script src="./resources/scripts/index.js"></script> -->
	<script>
		$('#btn-submit').on('click', function(e){
			e.preventDefault();
			const form = document.querySelector('#form-submit');
			let validateFlag = true;

			function _alert(errormsg) {
				$('#warning').text(errormsg);
				validateFlag = false;
			}

			if(validateFlag) {
				validateFlag && ((form.emp_no.value) || _alert('员工号为空！'));
				validateFlag && ((form.psw.value) || _alert('密码为空！'))
			}

			if(validateFlag) {
				_alert('登录成功！')
				$(location).attr('href', './resources/html/main.html');
				$.post('http://www.huangcongfu.cn/vms/index/index/login_check',$('#form-submit').serializeArray(),function(response) {
					if(response.code) {
						$(location).attr('href', './resources/html/main.html');
					}else {
						_alert(response.msg);
					}
				});
			}



			// var emp_no = $('#emp_no').val();
			// var psw = $('#psw').val();
			// if(!emp_no || !psw) {
			// 	$('#warning').text('员工号或密码为空！');
			// }else {
			// 	if(emp_no == 'shmily' && psw == '123456') {
			// 		// window.location.href = './resources/html/main.html';
			// 		$(location).attr('href', './resources/html/main.html');
			// 	}else {
			// 		$('#warning').text('员工号或密码错误！');
			// 	}
				
			//     var send_data = {
			//         emp_no: emp_no,
			//         psw: psw,
			//     };
			//     $.post('http://www.huangcongfu.cn/vms/index/index/login_check', send_data, function(response) {
			//         console.log(response);
						// if(response.code){
						// 	$(location).attr('href', './resources/html/main.html');
						// }else {
						// 	$('#warning').text(response.msg);
						// }
			//     });
			// }
			// }
		});
	</script>
</body>
</html>